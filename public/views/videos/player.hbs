<!doctype html>
<html lang="en">
<head>
    {{#> _head }}
        <title>播放</title>
        <link rel="stylesheet" href="/css/DPlayer.min.css">
    {{/_head}}
</head>
<body>
<div class="app" id="app">
    {{> header}}
    <section class="section">
        <div class="container">
            <div class="columns is-multiline">
                <div class="column is-three-quarters">
                    <div id="dplayer" style="width:100%;height: 100%;"></div>
                </div>
                <div class="column is-one-quarter">
                    <aside class="menu box" style="width: 100%;height: 700px;overflow-y: auto">
                        <p class="menu-label" id="prefix">{{prefix}}</p>
                        <ul class="menu-list">
                            <li><a>Dashboard</a></li>
                            <li><a>Dashboard</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Dashboard</a></li>
                            <li><a>Dashboard</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Customers</a></li>
                            <li><a>Customers</a></li>
                        </ul>
                        <button class="button is-text is-fullwidth" @click="moreClass">更多课程</button>
                    </aside>
                </div>
            </div>
        </div>
    </section>

    <input type="text" id="videoUrl" hidden value="{{cdnURL video.key}}">
</div>
{{> footer}}

{{#> _script }}
    <script src="/js/DPlayer.min.js"></script>
    <script>
        $(function () {

            let videourl = $('#videoUrl').val()
            let prefix = $('#prefix').text()

            console.log(window.nancode)

            //播放器
            var dp = new DPlayer({
                container: document.getElementById('dplayer'),
                theme: '#2780E3',
                // autoplay: true,
                video: {
                    url: videourl
                },
                contextmenu: [{
                    text: 'Video info',
                    click: function (player) {
                        player.infoPanel.triggle()
                    }
                }]
            })

            var app = new Vue({
                el: '#app',
                delimiters: ['${', '}'],
                methods: {
                    moreClass: function () {
                        console.log('12')
                    }
                },
                mounted () {
                    $.get('/api/v1/course', { prefix: prefix }, function (res) {
                        debugger
                    })
                }
            })
        })
    </script>
{{/_script}}
</body>
</html>


